# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Bot –∏ Mini App

## –û–±–∑–æ—Ä

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ DevDigest Tracker —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º Telegram –±–æ—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–æ–º –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫ Telegram Mini App –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram Client    ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Mini App    ‚îÇ‚óÑ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ Web View (Next.js App)
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ         ‚ñ≤           ‚îÇ
‚îÇ         ‚îÇ           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Telegram    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ     Bot       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Next.js    ‚îÇ
    ‚îÇ   Backend    ‚îÇ
    ‚îÇ              ‚îÇ
    ‚îÇ  ‚Ä¢ API       ‚îÇ
    ‚îÇ  ‚Ä¢ Webhook   ‚îÇ
    ‚îÇ  ‚Ä¢ DB        ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ß–∞—Å—Ç—å 1: Telegram Bot

### 1.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- `/start` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/subscribe <channel>` - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram –∫–∞–Ω–∞–ª
- `/unsubscribe <channel>` - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –∫–∞–Ω–∞–ª–∞
- `/list` - —Å–ø–∏—Å–æ–∫ –º–æ–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- `/summary` - –ø–æ–ª—É—á–∏—Ç—å —Å–∞–º–º–∞—Ä–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–µ–º—ã, —è–∑—ã–∫)
- `/help` - —Å–ø—Ä–∞–≤–∫–∞

#### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- **Inline –∫–Ω–æ–ø–∫–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- **Inline queries** - –ø–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏
- **Keyboard –º–µ–Ω—é** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∞–º–º–∞—Ä–∏

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –±–æ—Ç–∞

```
lib/
‚îú‚îÄ‚îÄ telegram/
‚îÇ   ‚îú‚îÄ‚îÄ bot.ts              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.ts     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ callbacks.ts    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback queries
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messages.ts     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inline.ts       # Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reply.ts        # Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatter.ts    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (Markdown)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.ts   # –í–∞–ª–∏–¥–∞—Ü–∏—è input
‚îÇ   ‚îî‚îÄ‚îÄ types.ts            # TypeScript —Ç–∏–ø—ã –¥–ª—è –±–æ—Ç–∞
```

### 1.3 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞

```typescript
// lib/telegram/bot.ts
import TelegramBot from "node-telegram-bot-api";

import { db } from "@/lib/db";

import { registerCallbacks } from "./handlers/callbacks";
import { registerCommands } from "./handlers/commands";

export class DevDigestBot {
  private bot: TelegramBot;

  constructor() {
    this.bot = new TelegramBot(process.env.TELEGRAM_BOT_TOKEN!, {
      polling: process.env.NODE_ENV === "development",
    });

    this.setupHandlers();
  }

  private setupHandlers() {
    registerCommands(this.bot);
    registerCallbacks(this.bot);
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∞–º–º–∞—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  async sendSummary(telegramId: string, summary: string) {
    await this.bot.sendMessage(telegramId, summary, {
      parse_mode: "Markdown",
      disable_web_page_preview: false,
    });
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º —Å–∞–º–º–∞—Ä–∏
  async notifyNewSummary(userId: string, summaryId: string) {
    const user = await db.user.findUnique({
      where: { id: userId },
      include: { telegramAccount: true },
    });

    if (!user?.telegramAccount) return;

    const summary = await db.summary.findUnique({
      where: { id: summaryId },
    });

    await this.bot.sendMessage(
      user.telegramAccount.telegramId,
      `üîî *–ù–æ–≤–æ–µ —Å–∞–º–º–∞—Ä–∏ –≥–æ—Ç–æ–≤–æ!*\n\n${summary?.title}`,
      {
        parse_mode: "Markdown",
        reply_markup: {
          inline_keyboard: [
            [
              {
                text: "üìñ –ß–∏—Ç–∞—Ç—å",
                web_app: { url: `${process.env.APP_URL}/summaries/${summaryId}` },
              },
              { text: "üì± –û—Ç–∫—Ä—ã—Ç—å Mini App", web_app: { url: process.env.MINI_APP_URL! } },
            ],
          ],
        },
      }
    );
  }

  getBot() {
    return this.bot;
  }
}

export const devDigestBot = new DevDigestBot();
```

```typescript
// lib/telegram/handlers/commands.ts
import TelegramBot from "node-telegram-bot-api";

import { db } from "@/lib/db";

import { channelsKeyboard } from "../keyboards/inline";
import { mainKeyboard, settingsKeyboard } from "../keyboards/reply";

export function registerCommands(bot: TelegramBot) {
  // /start - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  bot.onText(/\/start/, async (msg) => {
    const telegramId = msg.from!.id.toString();
    const username = msg.from!.username;
    const firstName = msg.from!.first_name;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    let user = await db.user.findFirst({
      where: { telegramAccount: { telegramId } },
    });

    if (!user) {
      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      user = await db.user.create({
        data: {
          name: firstName,
          telegramAccount: {
            create: {
              telegramId,
              username,
            },
          },
        },
      });
    }

    await bot.sendMessage(
      msg.chat.id,
      `üëã –ü—Ä–∏–≤–µ—Ç, ${firstName}!\n\n` +
        `–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é.\n\n` +
        `–ß—Ç–æ —è —É–º–µ—é:\n` +
        `‚Ä¢ üì± –ü–∞—Ä—Å–∏—Ç—å Telegram –∫–∞–Ω–∞–ª—ã –∏ RSS\n` +
        `‚Ä¢ ü§ñ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å AI —Å–∞–º–º–∞—Ä–∏\n` +
        `‚Ä¢ üéØ –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ–º–∞–º\n` +
        `‚Ä¢ üìä –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É\n\n` +
        `–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–π Mini App –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã!`,
      {
        parse_mode: "Markdown",
        reply_markup: {
          keyboard: mainKeyboard,
          resize_keyboard: true,
        },
      }
    );
  });

  // /subscribe - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª
  bot.onText(/\/subscribe (.+)/, async (msg, match) => {
    const channelUrl = match![1];
    const telegramId = msg.from!.id.toString();

    try {
      const user = await db.user.findFirst({
        where: { telegramAccount: { telegramId } },
      });

      if (!user) {
        await bot.sendMessage(msg.chat.id, "‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏ /start");
        return;
      }

      // –ü–∞—Ä—Å–∏–º –∫–∞–Ω–∞–ª –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –ë–î
      const channel = await db.channel.create({
        data: {
          userId: user.id,
          name: extractChannelName(channelUrl),
          type: "telegram",
          sourceUrl: channelUrl,
          telegramId: extractTelegramId(channelUrl),
          isActive: true,
        },
      });

      await bot.sendMessage(
        msg.chat.id,
        `‚úÖ –ö–∞–Ω–∞–ª *${channel.name}* –¥–æ–±–∞–≤–ª–µ–Ω!\n\n–¢–µ–ø–µ—Ä—å —è –±—É–¥—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã.`,
        { parse_mode: "Markdown" }
      );

      // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
      await fetchChannelPosts(channel.id);
    } catch (error) {
      await bot.sendMessage(
        msg.chat.id,
        "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª. –ü—Ä–æ–≤–µ—Ä—å URL –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞."
      );
    }
  });

  // /list - —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
  bot.onText(/\/list/, async (msg) => {
    const telegramId = msg.from!.id.toString();

    const user = await db.user.findFirst({
      where: { telegramAccount: { telegramId } },
      include: { channels: true },
    });

    if (!user?.channels.length) {
      await bot.sendMessage(
        msg.chat.id,
        "üì≠ –£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.\n\n–ò—Å–ø–æ–ª—å–∑—É–π /subscribe –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è."
      );
      return;
    }

    await bot.sendMessage(msg.chat.id, "üìã *–¢–≤–æ–∏ –∫–∞–Ω–∞–ª—ã:*", {
      parse_mode: "Markdown",
      reply_markup: channelsKeyboard(user.channels),
    });
  });

  // /summary - –ø–æ–ª—É—á–∏—Ç—å —Å–∞–º–º–∞—Ä–∏
  bot.onText(/\/summary/, async (msg) => {
    const telegramId = msg.from!.id.toString();

    const user = await db.user.findFirst({
      where: { telegramAccount: { telegramId } },
    });

    if (!user) {
      await bot.sendMessage(msg.chat.id, "‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏ /start");
      return;
    }

    const today = new Date().toISOString().split("T")[0];
    const summary = await db.summary.findFirst({
      where: {
        userId: user.id,
        period: `daily-${today}`,
      },
    });

    if (!summary) {
      await bot.sendMessage(
        msg.chat.id,
        "ü§ñ –°–∞–º–º–∞—Ä–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤–æ.\n\n–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å?",
        {
          reply_markup: {
            inline_keyboard: [
              [
                { text: "‚úÖ –î–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å", callback_data: "generate_summary" },
                { text: "‚ùå –û—Ç–º–µ–Ω–∞", callback_data: "cancel" },
              ],
            ],
          },
        }
      );
      return;
    }

    await bot.sendMessage(msg.chat.id, formatSummary(summary), {
      parse_mode: "Markdown",
      reply_markup: {
        inline_keyboard: [
          [
            {
              text: "üì± –û—Ç–∫—Ä—ã—Ç—å –≤ Mini App",
              web_app: { url: `${process.env.MINI_APP_URL}/summaries/${summary.id}` },
            },
          ],
        ],
      },
    });
  });

  // /settings - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  bot.onText(/\/settings/, async (msg) => {
    await bot.sendMessage(msg.chat.id, "‚öôÔ∏è *–ù–∞—Å—Ç—Ä–æ–π–∫–∏*\n\n–í—ã–±–µ—Ä–∏, —á—Ç–æ —Ö–æ—á–µ—à—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:", {
      parse_mode: "Markdown",
      reply_markup: settingsKeyboard,
    });
  });

  // /help - —Å–ø—Ä–∞–≤–∫–∞
  bot.onText(/\/help/, async (msg) => {
    await bot.sendMessage(
      msg.chat.id,
      `üìñ *–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º*\n\n` +
        `/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n` +
        `/subscribe <url> - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª\n` +
        `/unsubscribe <name> - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –∫–∞–Ω–∞–ª–∞\n` +
        `/list - –º–æ–∏ –∫–∞–Ω–∞–ª—ã\n` +
        `/summary - —Å–∞–º–º–∞—Ä–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è\n` +
        `/settings - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏\n` +
        `/help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\n\n` +
        `üí° –ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –∏–ª–∏ –æ—Ç–∫—Ä–æ–π Mini App –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã!`,
      { parse_mode: "Markdown" }
    );
  });
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function extractChannelName(url: string): string {
  const match = url.match(/t\.me\/([^\/]+)/);
  return match ? match[1] : "Unknown Channel";
}

function extractTelegramId(url: string): string | null {
  const match = url.match(/t\.me\/([^\/]+)/);
  return match ? match[1] : null;
}

function formatSummary(summary: any): string {
  return (
    `üìä *${summary.title}*\n\n` + `${summary.content}\n\n` + `üìå –¢–µ–º—ã: ${summary.topics.join(", ")}`
  );
}
```

```typescript
// lib/telegram/keyboards/inline.ts
import { InlineKeyboardMarkup } from "node-telegram-bot-api";

export function channelsKeyboard(channels: any[]): InlineKeyboardMarkup {
  return {
    inline_keyboard: channels.map((channel) => [
      {
        text: `${channel.isActive ? "‚úÖ" : "‚è∏"} ${channel.name}`,
        callback_data: `channel_${channel.id}`,
      },
    ]),
  };
}

export function summaryActionsKeyboard(summaryId: string): InlineKeyboardMarkup {
  return {
    inline_keyboard: [
      [
        {
          text: "üì± –û—Ç–∫—Ä—ã—Ç—å –≤ Mini App",
          web_app: { url: `${process.env.MINI_APP_URL}/summaries/${summaryId}` },
        },
      ],
      [
        { text: "üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è", switch_inline_query: summaryId },
        { text: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å", callback_data: `save_${summaryId}` },
      ],
    ],
  };
}
```

### 1.4 Webhook –¥–ª—è –±–æ—Ç–∞

```typescript
// app/api/telegram/webhook/route.ts
import { NextRequest, NextResponse } from "next/server";

import { devDigestBot } from "@/lib/telegram/bot";

export async function POST(req: NextRequest) {
  try {
    const update = await req.json();
    const bot = devDigestBot.getBot();

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ update
    await bot.processUpdate(update);

    return NextResponse.json({ ok: true });
  } catch (error) {
    console.error("Webhook error:", error);
    return NextResponse.json({ error: "Internal error" }, { status: 500 });
  }
}

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook (–≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –¥–µ–ø–ª–æ–µ)
export async function GET() {
  const webhookUrl = `${process.env.APP_URL}/api/telegram/webhook`;
  const bot = devDigestBot.getBot();

  await bot.setWebHook(webhookUrl);

  return NextResponse.json({
    message: "Webhook set",
    url: webhookUrl,
  });
}
```

---

## –ß–∞—Å—Ç—å 2: Telegram Mini App

### 2.1 –ß—Ç–æ —Ç–∞–∫–æ–µ Telegram Mini App?

Telegram Mini App - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram –∏ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º—É Telegram WebApp API.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram (–±–µ–∑ –¥–æ–ø. –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- –ù–∞—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ UI —ç–ª–µ–º–µ–Ω—Ç—ã
- –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (MainButton)
- Haptic feedback
- –î–æ—Å—Ç—É–ø –∫ QR —Å–∫–∞–Ω–µ—Ä—É, –±—É—Ñ–µ—Ä—É –æ–±–º–µ–Ω–∞
- –û–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Telegram Payments

### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Mini App —á–µ—Ä–µ–∑ BotFather

```
/newapp
@YourBotUsername
My DevDigest App
Short description of app
Upload photo (640x360)
Upload GIF demo (optional)
https://your-domain.com/mini-app
```

#### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram WebApp SDK

```typescript
// app/mini-app/layout.tsx
import Script from 'next/script';

export default function MiniAppLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <head>
        <Script
          src="https://telegram.org/js/telegram-web-app.js"
          strategy="beforeInteractive"
        />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

#### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ TypeScript —Ç–∏–ø–æ–≤

```typescript
// lib/telegram/webapp-types.ts
declare global {
  interface Window {
    Telegram?: {
      WebApp: TelegramWebApp;
    };
  }
}

export interface TelegramWebApp {
  initData: string;
  initDataUnsafe: WebAppInitData;
  version: string;
  platform: string;
  colorScheme: "light" | "dark";
  themeParams: ThemeParams;
  isExpanded: boolean;
  viewportHeight: number;
  viewportStableHeight: number;
  headerColor: string;
  backgroundColor: string;

  // –ú–µ—Ç–æ–¥—ã
  ready(): void;
  expand(): void;
  close(): void;

  // Main Button
  MainButton: MainButton;

  // Back Button
  BackButton: BackButton;

  // Haptic Feedback
  HapticFeedback: HapticFeedback;

  // –°–æ–±—ã—Ç–∏—è
  onEvent(eventType: string, callback: () => void): void;
  offEvent(eventType: string, callback: () => void): void;

  // –£—Ç–∏–ª–∏—Ç—ã
  sendData(data: string): void;
  openLink(url: string): void;
  openTelegramLink(url: string): void;
  showPopup(params: PopupParams): void;
  showAlert(message: string): void;
  showConfirm(message: string): void;
}

export interface WebAppInitData {
  query_id?: string;
  user?: WebAppUser;
  receiver?: WebAppUser;
  chat?: WebAppChat;
  start_param?: string;
  auth_date: number;
  hash: string;
}

export interface WebAppUser {
  id: number;
  is_bot: boolean;
  first_name: string;
  last_name?: string;
  username?: string;
  language_code?: string;
  photo_url?: string;
}

export interface MainButton {
  text: string;
  color: string;
  textColor: string;
  isVisible: boolean;
  isActive: boolean;
  isProgressVisible: boolean;

  setText(text: string): void;
  onClick(callback: () => void): void;
  offClick(callback: () => void): void;
  show(): void;
  hide(): void;
  enable(): void;
  disable(): void;
  showProgress(leaveActive?: boolean): void;
  hideProgress(): void;
}
```

### 2.3 React Hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram WebApp

```typescript
// lib/telegram/useTelegramWebApp.ts
"use client";

import { useEffect, useState } from "react";

import { TelegramWebApp, WebAppUser } from "./webapp-types";

export function useTelegramWebApp() {
  const [webApp, setWebApp] = useState<TelegramWebApp | null>(null);
  const [user, setUser] = useState<WebAppUser | null>(null);

  useEffect(() => {
    const tg = window.Telegram?.WebApp;

    if (tg) {
      tg.ready();
      tg.expand();

      setWebApp(tg);
      setUser(tg.initDataUnsafe.user || null);

      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
      document.documentElement.style.setProperty(
        "--tg-theme-bg-color",
        tg.themeParams.bg_color || "#ffffff"
      );
    }
  }, []);

  return { webApp, user, isReady: !!webApp };
}
```

### 2.4 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Mini App

```typescript
// app/mini-app/page.tsx
'use client';

import { useEffect } from 'react';
import { useTelegramWebApp } from '@/lib/telegram/useTelegramWebApp';
import { DashboardMiniApp } from '@/components/mini-app/DashboardMiniApp';
import { LoadingScreen } from '@/components/mini-app/LoadingScreen';

export default function MiniAppPage() {
  const { webApp, user, isReady } = useTelegramWebApp();

  useEffect(() => {
    if (!webApp) return;

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    webApp.MainButton.setText('–°–æ–∑–¥–∞—Ç—å —Å–∞–º–º–∞—Ä–∏');
    webApp.MainButton.onClick(() => {
      // –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∞–º–º–∞—Ä–∏
      console.log('Creating summary...');
    });

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥
    webApp.BackButton.onClick(() => {
      webApp.close();
    });

    return () => {
      webApp.MainButton.hide();
      webApp.BackButton.hide();
    };
  }, [webApp]);

  if (!isReady) {
    return <LoadingScreen />;
  }

  return (
    <main className="min-h-screen bg-[var(--tg-theme-bg-color)]">
      <DashboardMiniApp user={user!} />
    </main>
  );
}
```

```typescript
// components/mini-app/DashboardMiniApp.tsx
'use client';

import { useState, useEffect } from 'react';
import { WebAppUser } from '@/lib/telegram/webapp-types';
import { useTelegramWebApp } from '@/lib/telegram/useTelegramWebApp';

interface Props {
  user: WebAppUser;
}

export function DashboardMiniApp({ user }: Props) {
  const { webApp } = useTelegramWebApp();
  const [summaries, setSummaries] = useState([]);

  const handleGenerateSummary = async () => {
    if (!webApp) return;

    webApp.MainButton.showProgress();
    webApp.HapticFeedback.impactOccurred('medium');

    try {
      const response = await fetch('/api/summaries/generate', {
        method: 'POST',
        headers: {
          'X-Telegram-Init-Data': webApp.initData,
        },
      });

      const summary = await response.json();

      webApp.HapticFeedback.notificationOccurred('success');
      webApp.showAlert('–°–∞–º–º–∞—Ä–∏ —Å–æ–∑–¥–∞–Ω–æ!');

      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
      fetchSummaries();

    } catch (error) {
      webApp.HapticFeedback.notificationOccurred('error');
      webApp.showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∞–º–º–∞—Ä–∏');
    } finally {
      webApp.MainButton.hideProgress();
    }
  };

  useEffect(() => {
    fetchSummaries();
  }, []);

  const fetchSummaries = async () => {
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∞–º–º–∞—Ä–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  };

  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold mb-4">
        –ü—Ä–∏–≤–µ—Ç, {user.first_name}! üëã
      </h1>

      <div className="space-y-4">
        {/* –°–ø–∏—Å–æ–∫ —Å–∞–º–º–∞—Ä–∏ */}
      </div>
    </div>
  );
}
```

### 2.5 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram

```typescript
// lib/telegram/auth.ts
import crypto from "crypto";

export function validateTelegramWebAppData(initData: string): boolean {
  const BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN!;

  const urlParams = new URLSearchParams(initData);
  const hash = urlParams.get("hash");
  urlParams.delete("hash");

  const dataCheckString = Array.from(urlParams.entries())
    .sort(([a], [b]) => a.localeCompare(b))
    .map(([key, value]) => `${key}=${value}`)
    .join("\n");

  const secretKey = crypto.createHmac("sha256", "WebAppData").update(BOT_TOKEN).digest();

  const calculatedHash = crypto
    .createHmac("sha256", secretKey)
    .update(dataCheckString)
    .digest("hex");

  return calculatedHash === hash;
}

export async function getUserFromTelegramData(initData: string) {
  if (!validateTelegramWebAppData(initData)) {
    throw new Error("Invalid Telegram data");
  }

  const urlParams = new URLSearchParams(initData);
  const userJson = urlParams.get("user");

  if (!userJson) {
    throw new Error("No user data");
  }

  const telegramUser = JSON.parse(userJson);

  // –ù–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  let user = await db.user.findFirst({
    where: { telegramAccount: { telegramId: telegramUser.id.toString() } },
  });

  if (!user) {
    user = await db.user.create({
      data: {
        name: telegramUser.first_name,
        telegramAccount: {
          create: {
            telegramId: telegramUser.id.toString(),
            username: telegramUser.username,
          },
        },
      },
    });
  }

  return user;
}
```

```typescript
// app/api/summaries/generate/route.ts
import { NextRequest, NextResponse } from "next/server";

import { generateDailySummary } from "@/lib/ai/summarizer";
import { getUserFromTelegramData } from "@/lib/telegram/auth";

export async function POST(req: NextRequest) {
  try {
    const initData = req.headers.get("X-Telegram-Init-Data");

    if (!initData) {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
    }

    const user = await getUserFromTelegramData(initData);
    const summary = await generateDailySummary(user.id);

    return NextResponse.json(summary);
  } catch (error) {
    return NextResponse.json({ error: "Internal error" }, { status: 500 });
  }
}
```

---

## –ß–∞—Å—Ç—å 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

```prisma
// prisma/schema.prisma

// –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è Telegram –∞–∫–∫–∞—É–Ω—Ç–æ–≤
model TelegramAccount {
  id          String    @id @default(cuid())
  userId      String    @unique
  telegramId  String    @unique  // Telegram User ID
  username    String?
  firstName   String?
  lastName    String?
  photoUrl    String?
  languageCode String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([telegramId])
}

// –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å User
model User {
  id              String             @id @default(cuid())
  email           String?            @unique
  name            String?
  passwordHash    String?            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  createdAt       DateTime           @default(now())
  updatedAt       DateTime           @updatedAt

  channels        Channel[]
  preferences     UserPreferences?
  telegramAccount TelegramAccount?

  @@index([email])
}

// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
model UserPreferences {
  id                    String   @id @default(cuid())
  userId                String   @unique
  topics                String[]
  summaryInterval       String   @default("daily")
  language              String   @default("ru")

  // Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  telegramNotifications Boolean  @default(true)
  notifyOnNewSummary    Boolean  @default(true)
  notifyOnNewPosts      Boolean  @default(false)

  user                  User     @relation(fields: [userId], references: [id])
}
```

---

## –ß–∞—Å—Ç—å 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env.local

# Telegram Bot
TELEGRAM_BOT_TOKEN="your-bot-token-from-botfather"

# Mini App
MINI_APP_URL="https://yourdomain.com/mini-app"
APP_URL="https://yourdomain.com"

# Webhook (–¥–ª—è production)
TELEGRAM_WEBHOOK_SECRET="random-secret-string"
```

---

## –ß–∞—Å—Ç—å 5: –î–µ–ø–ª–æ–π –∏ –∑–∞–ø—É—Å–∫

### 5.1 Development —Ä–µ–∂–∏–º

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤ polling —Ä–µ–∂–∏–º–µ
pnpm dev

# –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç polling –ø—Ä–∏ NODE_ENV=development
```

### 5.2 Production —Ä–µ–∂–∏–º

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook
curl https://yourdomain.com/api/telegram/webhook

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
```

### 5.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App

1. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/start`
3. –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "üì± –û—Ç–∫—Ä—ã—Ç—å Mini App"
4. –ò–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑: `https://t.me/YourBotUsername/appname`

---

## –ß–∞—Å—Ç—å 6: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏

### 6.1 Inline Mode

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–µ–ª–∏—Ç—å—Å—è —Å–∞–º–º–∞—Ä–∏ —á–µ—Ä–µ–∑ inline queries:

```typescript
// lib/telegram/handlers/inline.ts
bot.on("inline_query", async (query) => {
  const results = await searchSummaries(query.query);

  await bot.answerInlineQuery(
    query.id,
    results.map((summary) => ({
      type: "article",
      id: summary.id,
      title: summary.title,
      description: summary.content.slice(0, 100),
      input_message_content: {
        message_text: formatSummary(summary),
        parse_mode: "Markdown",
      },
      reply_markup: summaryActionsKeyboard(summary.id),
    }))
  );
});
```

### 6.2 Web App –∫–Ω–æ–ø–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

```typescript
await bot.sendMessage(chatId, "–ü–æ—Å–º–æ—Ç—Ä–∏ —Å–≤–æ–∏ —Å–∞–º–º–∞—Ä–∏:", {
  reply_markup: {
    inline_keyboard: [
      [
        {
          text: "üìä –û—Ç–∫—Ä—ã—Ç—å Dashboard",
          web_app: { url: process.env.MINI_APP_URL! },
        },
      ],
    ],
  },
});
```

### 6.3 Telegram Login Widget (–¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏)

```typescript
// app/(auth)/login/page.tsx
export default function LoginPage() {
  return (
    <div>
      {/* –û–±—ã—á–Ω–∞—è —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ */}
      <LoginForm />

      {/* –ò–ª–∏ */}
      <div className="mt-4">
        <TelegramLoginButton
          botName="YourBotUsername"
          onAuth={handleTelegramAuth}
        />
      </div>
    </div>
  );
}
```

---

## Roadmap –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤—ã–π –±–æ—Ç (3-4 –¥–Ω—è)

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –∏ webhook
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã /start, /subscribe, /list
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∞–º–º–∞—Ä–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ

### –§–∞–∑–∞ 2: Mini App MVP (4-5 –¥–Ω–µ–π)

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram WebApp SDK
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ initData
- ‚úÖ –ë–∞–∑–æ–≤—ã–π UI –¥–∞—à–±–æ—Ä–¥–∞
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–∞–º–º–∞—Ä–∏

### –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (3-4 –¥–Ω—è)

- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ –≤ Mini App
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–º–∞—Ä–∏ –∏–∑ Mini App
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚úÖ Inline mode –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞

### –§–∞–∑–∞ 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ (2-3 –¥–Ω—è)

- ‚úÖ Haptic feedback
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º–Ω—É—é/—Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É Telegram
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–ï–¥–∏–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞** - –≤—Å–µ –≤ Telegram
2. **–ë—ã—Å—Ç—Ä—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥** - –Ω–µ –Ω—É–∂–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
3. **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ Telegram
4. **–ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
5. **–ù–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞** - –∑–Ω–∞–∫–æ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è

- **Telegram Payments** - –ø–ª–∞—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- **Telegram Stars** - –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∑–≤–µ–∑–¥—ã
- **Mini App Games** - –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è (—Å—Ç—Ä–∏–∫–∏ —á—Ç–µ–Ω–∏—è)
- **Channels/Groups –±–æ—Ç** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª—ã –¥–ª—è –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞

---

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ª—é–±–æ–π —á–∞—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏! üöÄ
